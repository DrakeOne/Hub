<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pok√©Dex Ultimate - Complete Pok√©mon Database</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;600;700;800;900&display=swap');
  
  :root {
    --primary-red: #FF0000;
    --primary-dark: #CC0000;
    --primary-darker: #990000;
    --accent-yellow: #FFCB05;
    --accent-blue: #3B4CCA;
    --bg-light: #F8F9FA;
    --bg-dark: #1A1A2E;
    --text-dark: #2C3E50;
    --text-light: #FFFFFF;
    --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    --hover-transform: translateY(-5px);
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  body {
    font-family: 'Rubik', -apple-system, BlinkMacSystemFont, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    position: relative;
    overflow-x: hidden;
  }
  
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.05" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,154.7C960,171,1056,181,1152,165.3C1248,149,1344,107,1392,85.3L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') no-repeat bottom;
    background-size: cover;
    pointer-events: none;
    z-index: 1;
  }
  
  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
    position: relative;
    z-index: 2;
  }
  
  /* Header Section */
  .header-section {
    text-align: center;
    padding: 40px 0;
    position: relative;
  }
  
  .pokedex-container {
    background: radial-gradient(ellipse at center, var(--primary-red) 0%, var(--primary-dark) 50%, var(--primary-darker) 100%);
    background-size: 400% 400%;
    animation: pulseGradient 15s ease infinite;
    border-radius: 30px;
    padding: 40px;
    box-shadow: var(--card-shadow);
    position: relative;
    overflow: hidden;
    max-width: 800px;
    margin: 0 auto;
  }
  
  @keyframes pulseGradient {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
  
  .pokedex-container::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    animation: rotate 30s linear infinite;
  }
  
  @keyframes rotate {
    to { transform: rotate(360deg); }
  }
  
  .logo-container {
    position: relative;
    z-index: 2;
    margin-bottom: 30px;
  }
  
  .logo-image {
    width: 300px;
    max-width: 80%;
    height: auto;
    filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
    animation: float 3s ease-in-out infinite;
  }
  
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }
  
  .pokeball-decoration {
    width: 80px;
    height: 80px;
    background: linear-gradient(to bottom, var(--primary-red) 0%, var(--primary-red) 50%, white 50%, white 100%);
    border-radius: 50%;
    border: 4px solid #333;
    position: relative;
    margin: 20px auto;
    animation: spin 3s ease-in-out infinite;
    box-shadow: inset -5px 5px 0 5px #ccc;
  }
  
  .pokeball-decoration::before {
    content: '';
    position: absolute;
    background: white;
    width: 20px;
    height: 20px;
    border: 3px solid #333;
    border-radius: 50%;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
  
  .pokeball-decoration::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 8px;
    background: #333;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
  }
  
  @keyframes spin {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-10deg); }
    75% { transform: rotate(10deg); }
  }
  
  /* Search Section */
  .search-section {
    margin: 40px 0;
    position: relative;
    z-index: 10;
  }
  
  .search-container {
    max-width: 600px;
    margin: 0 auto;
    position: relative;
  }
  
  .search-wrapper {
    position: relative;
    background: white;
    border-radius: 50px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    overflow: hidden;
    transition: var(--transition);
  }
  
  .search-wrapper:focus-within {
    transform: scale(1.02);
    box-shadow: 0 25px 50px rgba(0,0,0,0.15);
  }
  
  .search-input {
    width: 100%;
    padding: 20px 140px 20px 30px;
    font-size: 1.1rem;
    border: none;
    outline: none;
    background: transparent;
    color: var(--text-dark);
  }
  
  .search-button {
    position: absolute;
    right: 5px;
    top: 50%;
    transform: translateY(-50%);
    background: linear-gradient(135deg, var(--accent-blue) 0%, #5D6FDB 100%);
    color: white;
    border: none;
    padding: 15px 30px;
    border-radius: 45px;
    cursor: pointer;
    font-weight: 600;
    transition: var(--transition);
    box-shadow: 0 5px 15px rgba(59, 76, 202, 0.3);
  }
  
  .search-button:hover {
    transform: translateY(-50%) scale(1.05);
    box-shadow: 0 8px 20px rgba(59, 76, 202, 0.4);
  }
  
  /* Filter Tabs */
  .filter-section {
    margin: 30px 0;
    text-align: center;
  }
  
  .filter-tabs {
    display: inline-flex;
    background: white;
    border-radius: 50px;
    padding: 5px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    gap: 5px;
    flex-wrap: wrap;
    justify-content: center;
  }
  
  .filter-tab {
    padding: 12px 24px;
    border: none;
    background: transparent;
    border-radius: 45px;
    cursor: pointer;
    font-weight: 500;
    color: var(--text-dark);
    transition: var(--transition);
    white-space: nowrap;
  }
  
  .filter-tab:hover {
    background: rgba(0,0,0,0.05);
  }
  
  .filter-tab.active {
    background: linear-gradient(135deg, var(--accent-blue) 0%, #5D6FDB 100%);
    color: white;
    box-shadow: 0 5px 15px rgba(59, 76, 202, 0.3);
  }
  
  /* Pokemon Grid */
  .pokemon-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 25px;
    margin: 40px 0;
    padding: 20px 0;
  }
  
  @media (max-width: 768px) {
    .pokemon-grid {
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 15px;
    }
  }
  
  .pokemon-card {
    background: white;
    border-radius: 20px;
    overflow: hidden;
    cursor: pointer;
    transition: var(--transition);
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    position: relative;
    animation: fadeInUp 0.5s ease forwards;
    opacity: 0;
  }
  
  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
    from {
      opacity: 0;
      transform: translateY(20px);
    }
  }
  
  .pokemon-card:hover {
    transform: var(--hover-transform);
    box-shadow: 0 20px 40px rgba(0,0,0,0.15);
  }
  
  .pokemon-card-header {
    padding: 15px;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    position: relative;
  }
  
  .pokemon-number {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 0.9rem;
    font-weight: 700;
    color: rgba(0,0,0,0.3);
  }
  
  .pokemon-image-container {
    padding: 20px;
    text-align: center;
    position: relative;
  }
  
  .pokemon-image {
    width: 120px;
    height: 120px;
    object-fit: contain;
    transition: var(--transition);
    filter: drop-shadow(0 5px 10px rgba(0,0,0,0.2));
  }
  
  .pokemon-card:hover .pokemon-image {
    transform: scale(1.1) rotate(5deg);
  }
  
  .pokemon-info {
    padding: 20px;
    text-align: center;
  }
  
  .pokemon-name {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--text-dark);
    margin-bottom: 10px;
    text-transform: capitalize;
  }
  
  .pokemon-types {
    display: flex;
    gap: 8px;
    justify-content: center;
    flex-wrap: wrap;
  }
  
  .type-badge {
    padding: 5px 15px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
    color: white;
    text-transform: uppercase;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
  }
  
  /* Type Colors */
  .type-normal { background: linear-gradient(135deg, #A8A878 0%, #8A8A59 100%); }
  .type-fire { background: linear-gradient(135deg, #F08030 0%, #DD6610 100%); }
  .type-water { background: linear-gradient(135deg, #6890F0 0%, #386CEB 100%); }
  .type-electric { background: linear-gradient(135deg, #F8D030 0%, #F0C108 100%); }
  .type-grass { background: linear-gradient(135deg, #78C850 0%, #5CA935 100%); }
  .type-ice { background: linear-gradient(135deg, #98D8D8 0%, #69C6C6 100%); }
  .type-fighting { background: linear-gradient(135deg, #C03028 0%, #A52A22 100%); }
  .type-poison { background: linear-gradient(135deg, #A040A0 0%, #803380 100%); }
  .type-ground { background: linear-gradient(135deg, #E0C068 0%, #D4A82F 100%); }
  .type-flying { background: linear-gradient(135deg, #A890F0 0%, #9180C4 100%); }
  .type-psychic { background: linear-gradient(135deg, #F85888 0%, #F61C5D 100%); }
  .type-bug { background: linear-gradient(135deg, #A8B820 0%, #8D9A1B 100%); }
  .type-rock { background: linear-gradient(135deg, #B8A038 0%, #93802D 100%); }
  .type-ghost { background: linear-gradient(135deg, #705898 0%, #554374 100%); }
  .type-dragon { background: linear-gradient(135deg, #7038F8 0%, #4C08EF 100%); }
  .type-dark { background: linear-gradient(135deg, #705848 0%, #49392F 100%); }
  .type-steel { background: linear-gradient(135deg, #B8B8D0 0%, #9797BA 100%); }
  .type-fairy { background: linear-gradient(135deg, #EE99AC 0%, #E969A3 100%); }
  
  /* Sound Button */
  .sound-button {
    position: absolute;
    bottom: 10px;
    right: 10px;
    width: 35px;
    height: 35px;
    background: rgba(255,255,255,0.9);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    opacity: 0;
  }
  
  .pokemon-card:hover .sound-button {
    opacity: 1;
  }
  
  .sound-button:hover {
    transform: scale(1.1);
    background: var(--accent-yellow);
  }
  
  .sound-button.playing {
    animation: pulse 0.5s ease infinite;
  }
  
  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.2); }
  }
  
  /* Loading State */
  .loading-container {
    text-align: center;
    padding: 60px;
  }
  
  .pokeball-loader {
    width: 100px;
    height: 100px;
    margin: 0 auto 20px;
    position: relative;
    animation: bounce 1s ease infinite;
  }
  
  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
  }
  
  .pokeball-loader::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, var(--primary-red) 0%, var(--primary-red) 50%, white 50%, white 100%);
    border-radius: 50%;
    border: 4px solid #333;
    animation: spin 1s linear infinite;
  }
  
  /* Modal */
  .modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.8);
    z-index: 1000;
    overflow-y: auto;
    padding: 20px;
  }
  
  .modal-content {
    background: white;
    max-width: 900px;
    margin: 40px auto;
    border-radius: 30px;
    overflow: hidden;
    animation: modalSlideIn 0.3s ease;
    position: relative;
  }
  
  @keyframes modalSlideIn {
    from {
      transform: translateY(-50px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
  
  .modal-header {
    background: linear-gradient(135deg, var(--primary-red) 0%, var(--primary-dark) 100%);
    padding: 40px;
    text-align: center;
    position: relative;
    color: white;
  }
  
  .close-modal {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 40px;
    height: 40px;
    background: rgba(255,255,255,0.2);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
    font-size: 24px;
    color: white;
  }
  
  .close-modal:hover {
    background: rgba(255,255,255,0.3);
    transform: rotate(90deg);
  }
  
  .modal-pokemon-image {
    width: 200px;
    height: 200px;
    margin: 0 auto;
    display: block;
    filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
  }
  
  .modal-pokemon-name {
    font-size: 2.5rem;
    font-weight: 800;
    margin: 20px 0;
    text-transform: capitalize;
  }
  
  .modal-body {
    padding: 40px;
  }
  
  .detail-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
    margin-bottom: 30px;
  }
  
  .detail-section {
    background: #f8f9fa;
    border-radius: 15px;
    padding: 25px;
  }
  
  .detail-title {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--accent-blue);
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .stat-item {
    margin-bottom: 15px;
  }
  
  .stat-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
  }
  
  .stat-name {
    font-weight: 500;
    color: #666;
  }
  
  .stat-value {
    font-weight: 700;
    color: var(--text-dark);
  }
  
  .stat-bar {
    height: 10px;
    background: #e0e0e0;
    border-radius: 10px;
    overflow: hidden;
  }
  
  .stat-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent-blue) 0%, #5D6FDB 100%);
    border-radius: 10px;
    transition: width 1s ease;
  }
  
  /* Sprites Gallery */
  .sprites-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 15px;
    margin-top: 20px;
  }
  
  .sprite-item {
    background: white;
    border-radius: 10px;
    padding: 10px;
    text-align: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }
  
  .sprite-item img {
    width: 80px;
    height: 80px;
    object-fit: contain;
  }
  
  .sprite-label {
    font-size: 0.8rem;
    color: #666;
    margin-top: 5px;
  }
  
  /* Evolution Chain */
  .evolution-chain {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
    margin-top: 20px;
  }
  
  .evolution-item {
    text-align: center;
    cursor: pointer;
    transition: var(--transition);
  }
  
  .evolution-item:hover {
    transform: scale(1.1);
  }
  
  .evolution-image {
    width: 80px;
    height: 80px;
    background: #f0f0f0;
    border-radius: 50%;
    padding: 10px;
    margin-bottom: 5px;
  }
  
  .evolution-name {
    font-size: 0.9rem;
    text-transform: capitalize;
  }
  
  .evolution-arrow {
    font-size: 1.5rem;
    color: #999;
  }
  
  /* Pikachu Decoration */
  .pikachu-decoration {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 100px;
    height: auto;
    z-index: 100;
    filter: drop-shadow(5px 5px 10px rgba(0,0,0,0.3));
    animation: pikachuFloat 3s ease-in-out infinite;
    cursor: pointer;
    transition: var(--transition);
  }
  
  @keyframes pikachuFloat {
    0%, 100% { transform: translateY(0) rotate(-5deg); }
    50% { transform: translateY(-15px) rotate(5deg); }
  }
  
  .pikachu-decoration:hover {
    transform: scale(1.1);
  }
  
  /* Settings */
  .settings-button {
    position: fixed;
    bottom: 20px;
    left: 20px;
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, var(--accent-blue) 0%, #5D6FDB 100%);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(59, 76, 202, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
    z-index: 100;
  }
  
  .settings-button:hover {
    transform: scale(1.1) rotate(180deg);
  }
  
  .settings-panel {
    position: fixed;
    bottom: 90px;
    left: 20px;
    background: white;
    border-radius: 20px;
    padding: 20px;
    box-shadow: var(--card-shadow);
    transform: scale(0.9) translateY(20px);
    opacity: 0;
    pointer-events: none;
    transition: var(--transition);
    z-index: 99;
    min-width: 200px;
  }
  
  .settings-panel.active {
    transform: scale(1) translateY(0);
    opacity: 1;
    pointer-events: auto;
  }
  
  .language-select {
    width: 100%;
    padding: 10px;
    border: 2px solid #e0e0e0;
    border-radius: 10px;
    font-size: 1rem;
    cursor: pointer;
    transition: var(--transition);
  }
  
  .language-select:focus {
    border-color: var(--accent-blue);
    outline: none;
  }
  
  /* Pagination */
  .pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin: 40px 0;
    flex-wrap: wrap;
  }
  
  .pagination-button {
    padding: 10px 20px;
    background: white;
    border: 2px solid #e0e0e0;
    border-radius: 10px;
    cursor: pointer;
    font-weight: 500;
    transition: var(--transition);
  }
  
  .pagination-button:hover:not(:disabled) {
    background: var(--accent-blue);
    color: white;
    border-color: var(--accent-blue);
  }
  
  .pagination-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  
  .pagination-info {
    padding: 10px 20px;
    background: #f0f0f0;
    border-radius: 10px;
    font-weight: 500;
  }
  
  /* Responsive */
  @media (max-width: 768px) {
    .container {
      padding: 10px;
    }
    
    .logo-image {
      width: 200px;
    }
    
    .search-input {
      padding: 15px 120px 15px 20px;
      font-size: 1rem;
    }
    
    .search-button {
      padding: 12px 20px;
    }
    
    .filter-tabs {
      max-width: 100%;
      padding: 3px;
    }
    
    .filter-tab {
      padding: 8px 16px;
      font-size: 0.9rem;
    }
    
    .modal-content {
      margin: 20px auto;
    }
    
    .modal-pokemon-name {
      font-size: 1.8rem;
    }
    
    .detail-grid {
      grid-template-columns: 1fr;
    }
  }
  
  /* No Results */
  .no-results {
    text-align: center;
    padding: 60px 20px;
    color: white;
  }
  
  .no-results-icon {
    font-size: 4rem;
    margin-bottom: 20px;
  }
  
  .no-results h3 {
    font-size: 1.5rem;
    margin-bottom: 10px;
  }
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <div class="container">
    <!-- Header Section -->
    <div class="header-section">
      <div class="pokedex-container">
        <div class="logo-container">
          <img src="https://i.postimg.cc/6q2Vrgj3/Pok-Web-Dex-7-6-2024.png" alt="Pok√©WebDex" class="logo-image">
        </div>
        <div class="pokeball-decoration"></div>
      </div>
    </div>

    <!-- Search Section -->
    <div class="search-section">
      <div class="search-container">
        <div class="search-wrapper">
          <input 
            type="text" 
            id="searchInput" 
            class="search-input" 
            placeholder="Search Pok√©mon by name or number..."
            autocomplete="off"
          >
          <button class="search-button" id="searchButton">
            <i class="fas fa-search"></i> Search
          </button>
        </div>
      </div>
    </div>

    <!-- Filter Section -->
    <div class="filter-section">
      <div class="filter-tabs">
        <button class="filter-tab active" data-filter="all">All</button>
        <button class="filter-tab" data-gen="1">Gen I</button>
        <button class="filter-tab" data-gen="2">Gen II</button>
        <button class="filter-tab" data-gen="3">Gen III</button>
        <button class="filter-tab" data-gen="4">Gen IV</button>
        <button class="filter-tab" data-gen="5">Gen V</button>
        <button class="filter-tab" data-gen="6">Gen VI</button>
        <button class="filter-tab" data-gen="7">Gen VII</button>
        <button class="filter-tab" data-gen="8">Gen VIII</button>
        <button class="filter-tab" data-gen="9">Gen IX</button>
      </div>
    </div>

    <!-- Pokemon Grid -->
    <div id="pokemonGrid" class="pokemon-grid"></div>

    <!-- Loading -->
    <div id="loadingContainer" class="loading-container" style="display: none;">
      <div class="pokeball-loader"></div>
      <h3>Loading Pok√©mon...</h3>
    </div>

    <!-- No Results -->
    <div id="noResults" class="no-results" style="display: none;">
      <div class="no-results-icon">üò¢</div>
      <h3>No Pok√©mon found</h3>
      <p>Try searching with a different name or number</p>
    </div>

    <!-- Pagination -->
    <div id="pagination" class="pagination"></div>
  </div>

  <!-- Pokemon Detail Modal -->
  <div id="pokemonModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close-modal" onclick="closeModal()">
          <i class="fas fa-times"></i>
        </button>
        <div id="modalHeader"></div>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <!-- Pikachu Decoration -->
  <img 
    src="https://i.postimg.cc/sX0wFgXs/ezgif-5-4e3f8cd015.gif" 
    alt="Pikachu" 
    class="pikachu-decoration"
    onclick="playPikachuSound()"
  >

  <!-- Settings Button -->
  <button class="settings-button" id="settingsButton">
    <i class="fas fa-cog"></i>
  </button>

  <!-- Settings Panel -->
  <div class="settings-panel" id="settingsPanel">
    <select class="language-select" id="languageSelect">
      <option value="en">English</option>
      <option value="es">Espa√±ol</option>
      <option value="fr">Fran√ßais</option>
      <option value="de">Deutsch</option>
      <option value="it">Italiano</option>
      <option value="ja">Êó•Êú¨Ë™û</option>
      <option value="ko">ÌïúÍµ≠Ïñ¥</option>
      <option value="zh-Hans">‰∏≠Êñá</option>
    </select>
  </div>

  <script>
    // Configuration
    const API_BASE = 'https://pokeapi.co/api/v2';
    const POKEMON_PER_PAGE = 20;
    let currentPage = 1;
    let totalPokemon = 1010; // Total Pokemon as of Gen 9
    let currentLanguage = localStorage.getItem('pokedexLanguage') || 'en';
    let allPokemon = [];
    let filteredPokemon = [];
    let currentFilter = 'all';
    let searchQuery = '';
    
    // Generation ranges
    const genRanges = {
      1: [1, 151],
      2: [152, 251],
      3: [252, 386],
      4: [387, 493],
      5: [494, 649],
      6: [650, 721],
      7: [722, 809],
      8: [810, 905],
      9: [906, 1010]
    };

    // Translations
    const translations = {
      en: {
        searchPlaceholder: 'Search Pok√©mon by name or number...',
        search: 'Search',
        loading: 'Loading Pok√©mon...',
        noResults: 'No Pok√©mon found',
        noResultsDesc: 'Try searching with a different name or number',
        height: 'Height',
        weight: 'Weight',
        abilities: 'Abilities',
        hiddenAbility: 'Hidden',
        baseStats: 'Base Stats',
        hp: 'HP',
        attack: 'Attack',
        defense: 'Defense',
        spAttack: 'Sp. Attack',
        spDefense: 'Sp. Defense',
        speed: 'Speed',
        total: 'Total',
        evolution: 'Evolution Chain',
        sprites: 'Sprites',
        moves: 'Moves',
        pokedexEntry: 'Pok√©dex Entry',
        types: 'Types',
        genera: 'Species',
        captureRate: 'Capture Rate',
        baseHappiness: 'Base Happiness',
        growthRate: 'Growth Rate',
        eggGroups: 'Egg Groups',
        previous: 'Previous',
        next: 'Next',
        page: 'Page'
      },
      es: {
        searchPlaceholder: 'Buscar Pok√©mon por nombre o n√∫mero...',
        search: 'Buscar',
        loading: 'Cargando Pok√©mon...',
        noResults: 'No se encontraron Pok√©mon',
        noResultsDesc: 'Intenta buscar con un nombre o n√∫mero diferente',
        height: 'Altura',
        weight: 'Peso',
        abilities: 'Habilidades',
        hiddenAbility: 'Oculta',
        baseStats: 'Estad√≠sticas Base',
        hp: 'PS',
        attack: 'Ataque',
        defense: 'Defensa',
        spAttack: 'At. Especial',
        spDefense: 'Def. Especial',
        speed: 'Velocidad',
        total: 'Total',
        evolution: 'Cadena Evolutiva',
        sprites: 'Sprites',
        moves: 'Movimientos',
        pokedexEntry: 'Entrada de la Pok√©dex',
        types: 'Tipos',
        genera: 'Especie',
        captureRate: 'Ratio de Captura',
        baseHappiness: 'Felicidad Base',
        growthRate: 'Ratio de Crecimiento',
        eggGroups: 'Grupos Huevo',
        previous: 'Anterior',
        next: 'Siguiente',
        page: 'P√°gina'
      }
    };

    // Get translation
    function t(key) {
      return translations[currentLanguage][key] || translations['en'][key] || key;
    }

    // Update UI language
    function updateLanguage() {
      document.getElementById('searchInput').placeholder = t('searchPlaceholder');
      document.querySelector('.search-button').innerHTML = `<i class="fas fa-search"></i> ${t('search')}`;
      document.querySelector('.loading-container h3').textContent = t('loading');
      document.querySelector('.no-results h3').textContent = t('noResults');
      document.querySelector('.no-results p').textContent = t('noResultsDesc');
      
      // Re-render current view
      if (filteredPokemon.length > 0) {
        renderPokemonGrid();
      }
    }

    // Initialize
    async function init() {
      updateLanguage();
      await loadAllPokemon();
      applyFilter();
    }

    // Load all Pokemon
    async function loadAllPokemon() {
      showLoading();
      try {
        const response = await fetch(`${API_BASE}/pokemon?limit=${totalPokemon}`);
        const data = await response.json();
        allPokemon = data.results.map((pokemon, index) => ({
          ...pokemon,
          id: index + 1
        }));
        hideLoading();
      } catch (error) {
        console.error('Error loading Pokemon:', error);
        hideLoading();
      }
    }

    // Apply filter
    function applyFilter() {
      if (currentFilter === 'all') {
        filteredPokemon = [...allPokemon];
      } else {
        const [min, max] = genRanges[currentFilter];
        filteredPokemon = allPokemon.filter(p => p.id >= min && p.id <= max);
      }
      
      // Apply search filter
      if (searchQuery) {
        filteredPokemon = filteredPokemon.filter(p => 
          p.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
          p.id.toString() === searchQuery
        );
      }
      
      currentPage = 1;
      renderPokemonGrid();
      renderPagination();
    }

    // Render Pokemon grid
    async function renderPokemonGrid() {
      const grid = document.getElementById('pokemonGrid');
      const start = (currentPage - 1) * POKEMON_PER_PAGE;
      const end = start + POKEMON_PER_PAGE;
      const pokemonToShow = filteredPokemon.slice(start, end);
      
      if (pokemonToShow.length === 0) {
        document.getElementById('noResults').style.display = 'block';
        grid.innerHTML = '';
        return;
      }
      
      document.getElementById('noResults').style.display = 'none';
      grid.innerHTML = '';
      
      for (let i = 0; i < pokemonToShow.length; i++) {
        const pokemon = pokemonToShow[i];
        const card = await createPokemonCard(pokemon);
        card.style.animationDelay = `${i * 0.05}s`;
        grid.appendChild(card);
      }
    }

    // Create Pokemon card
    async function createPokemonCard(pokemon) {
      const card = document.createElement('div');
      card.className = 'pokemon-card';
      
      try {
        const response = await fetch(`${API_BASE}/pokemon/${pokemon.id}`);
        const data = await response.json();
        
        card.innerHTML = `
          <div class="pokemon-card-header">
            <span class="pokemon-number">#${String(data.id).padStart(4, '0')}</span>
          </div>
          <div class="pokemon-image-container">
            <img 
              class="pokemon-image" 
              src="${data.sprites.other['official-artwork'].front_default || data.sprites.front_default}" 
              alt="${data.name}"
              loading="lazy"
            >
            <button class="sound-button" onclick="playPokemonCry(${data.id}, event)">
              <i class="fas fa-volume-up"></i>
            </button>
          </div>
          <div class="pokemon-info">
            <h3 class="pokemon-name">${data.name}</h3>
            <div class="pokemon-types">
              ${data.types.map(type => `
                <span class="type-badge type-${type.type.name}">${type.type.name}</span>
              `).join('')}
            </div>
          </div>
        `;
        
        card.onclick = () => showPokemonDetail(data.id);
      } catch (error) {
        console.error(`Error loading Pokemon ${pokemon.id}:`, error);
        card.innerHTML = `
          <div class="pokemon-info">
            <h3 class="pokemon-name">Error loading</h3>
          </div>
        `;
      }
      
      return card;
    }

    // Show Pokemon detail
    async function showPokemonDetail(pokemonId) {
      const modal = document.getElementById('pokemonModal');
      modal.style.display = 'block';
      
      try {
        // Fetch Pokemon data
        const pokemonResponse = await fetch(`${API_BASE}/pokemon/${pokemonId}`);
        const pokemonData = await pokemonResponse.json();
        
        // Fetch species data
        const speciesResponse = await fetch(pokemonData.species.url);
        const speciesData = await speciesResponse.json();
        
        // Fetch evolution chain
        const evolutionResponse = await fetch(speciesData.evolution_chain.url);
        const evolutionData = await evolutionResponse.json();
        
        renderModalContent(pokemonData, speciesData, evolutionData);
      } catch (error) {
        console.error('Error loading Pokemon detail:', error);
      }
    }

    // Render modal content
    function renderModalContent(pokemon, species, evolution) {
      const modalHeader = document.getElementById('modalHeader');
      const modalBody = document.getElementById('modalBody');
      
      // Get localized data
      const genus = species.genera.find(g => g.language.name === currentLanguage) || 
                   species.genera.find(g => g.language.name === 'en');
      const flavorText = species.flavor_text_entries.find(f => f.language.name === currentLanguage) ||
                        species.flavor_text_entries.find(f => f.language.name === 'en');
      
      // Calculate total stats
      const totalStats = pokemon.stats.reduce((sum, stat) => sum + stat.base_stat, 0);
      
      modalHeader.innerHTML = `
        <img 
          class="modal-pokemon-image" 
          src="${pokemon.sprites.other['official-artwork'].front_default || pokemon.sprites.front_default}" 
          alt="${pokemon.name}"
        >
        <h2 class="modal-pokemon-name">${pokemon.name}</h2>
        <p>${genus ? genus.genus : ''}</p>
        <div class="pokemon-types">
          ${pokemon.types.map(type => `
            <span class="type-badge type-${type.type.name}">${type.type.name}</span>
          `).join('')}
        </div>
      `;
      
      modalBody.innerHTML = `
        <div class="detail-grid">
          <!-- Basic Info -->
          <div class="detail-section">
            <h3 class="detail-title">
              <i class="fas fa-info-circle"></i> Information
            </h3>
            <div class="info-row">
              <span>${t('height')}</span>
              <strong>${(pokemon.height / 10).toFixed(1)} m</strong>
            </div>
            <div class="info-row">
              <span>${t('weight')}</span>
              <strong>${(pokemon.weight / 10).toFixed(1)} kg</strong>
            </div>
            <div class="info-row">
              <span>${t('captureRate')}</span>
              <strong>${species.capture_rate}</strong>
            </div>
            <div class="info-row">
              <span>${t('baseHappiness')}</span>
              <strong>${species.base_happiness}</strong>
            </div>
            <div class="info-row">
              <span>${t('growthRate')}</span>
              <strong>${species.growth_rate.name.replace('-', ' ')}</strong>
            </div>
          </div>
          
          <!-- Abilities -->
          <div class="detail-section">
            <h3 class="detail-title">
              <i class="fas fa-star"></i> ${t('abilities')}
            </h3>
            ${pokemon.abilities.map(ability => `
              <div class="ability-item">
                ${ability.ability.name.replace('-', ' ')}
                ${ability.is_hidden ? `<small>(${t('hiddenAbility')})</small>` : ''}
              </div>
            `).join('')}
          </div>
        </div>
        
        <!-- Stats -->
        <div class="detail-section">
          <h3 class="detail-title">
            <i class="fas fa-chart-bar"></i> ${t('baseStats')}
          </h3>
          ${pokemon.stats.map(stat => {
            const statName = {
              'hp': t('hp'),
              'attack': t('attack'),
              'defense': t('defense'),
              'special-attack': t('spAttack'),
              'special-defense': t('spDefense'),
              'speed': t('speed')
            }[stat.stat.name] || stat.stat.name;
            
            return `
              <div class="stat-item">
                <div class="stat-header">
                  <span class="stat-name">${statName}</span>
                  <span class="stat-value">${stat.base_stat}</span>
                </div>
                <div class="stat-bar">
                  <div class="stat-fill" style="width: ${(stat.base_stat / 255) * 100}%"></div>
                </div>
              </div>
            `;
          }).join('')}
          <div class="stat-item">
            <div class="stat-header">
              <span class="stat-name"><strong>${t('total')}</strong></span>
              <span class="stat-value"><strong>${totalStats}</strong></span>
            </div>
          </div>
        </div>
        
        <!-- Evolution Chain -->
        ${renderEvolutionChain(evolution)}
        
        <!-- Sprites -->
        <div class="detail-section">
          <h3 class="detail-title">
            <i class="fas fa-images"></i> ${t('sprites')}
          </h3>
          <div class="sprites-gallery">
            ${renderSprites(pokemon.sprites)}
          </div>
        </div>
        
        <!-- Pokedex Entry -->
        ${flavorText ? `
          <div class="detail-section">
            <h3 class="detail-title">
              <i class="fas fa-book"></i> ${t('pokedexEntry')}
            </h3>
            <p>${flavorText.flavor_text.replace(/\f/g, ' ')}</p>
          </div>
        ` : ''}
      `;
      
      // Animate stats
      setTimeout(() => {
        document.querySelectorAll('.stat-fill').forEach(fill => {
          fill.style.width = fill.style.width;
        });
      }, 100);
    }

    // Render evolution chain
    function renderEvolutionChain(evolutionData) {
      const evolutions = [];
      
      function traverse(node) {
        evolutions.push({
          name: node.species.name,
          id: node.species.url.split('/').slice(-2, -1)[0]
        });
        
        if (node.evolves_to.length > 0) {
          node.evolves_to.forEach(evolution => traverse(evolution));
        }
      }
      
      traverse(evolutionData.chain);
      
      if (evolutions.length <= 1) return '';
      
      return `
        <div class="detail-section">
          <h3 class="detail-title">
            <i class="fas fa-dna"></i> ${t('evolution')}
          </h3>
          <div class="evolution-chain">
            ${evolutions.map((evo, index) => `
              ${index > 0 ? '<div class="evolution-arrow">‚Üí</div>' : ''}
              <div class="evolution-item" onclick="showPokemonDetail(${evo.id})">
                <img 
                  class="evolution-image" 
                  src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${evo.id}.png"
                  alt="${evo.name}"
                >
                <div class="evolution-name">${evo.name}</div>
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }

    // Render sprites
    function renderSprites(sprites) {
      const spriteList = [
        { url: sprites.front_default, label: 'Front' },
        { url: sprites.back_default, label: 'Back' },
        { url: sprites.front_shiny, label: 'Front Shiny' },
        { url: sprites.back_shiny, label: 'Back Shiny' }
      ].filter(sprite => sprite.url);
      
      return spriteList.map(sprite => `
        <div class="sprite-item">
          <img src="${sprite.url}" alt="${sprite.label}">
          <div class="sprite-label">${sprite.label}</div>
        </div>
      `).join('');
    }

    // Play Pokemon cry
    async function playPokemonCry(pokemonId, event) {
      event.stopPropagation();
      const button = event.currentTarget;
      button.classList.add('playing');
      
      try {
        const audio = new Audio(`https://raw.githubusercontent.com/PokeAPI/cries/main/cries/pokemon/latest/${pokemonId}.ogg`);
        audio.volume = 0.5;
        await audio.play();
        
        audio.onended = () => {
          button.classList.remove('playing');
        };
      } catch (error) {
        console.error('Error playing Pokemon cry:', error);
        button.classList.remove('playing');
      }
    }

    // Play Pikachu sound
    function playPikachuSound() {
      const audio = new Audio('https://raw.githubusercontent.com/PokeAPI/cries/main/cries/pokemon/latest/25.ogg');
      audio.volume = 0.5;
      audio.play().catch(console.error);
    }

    // Close modal
    function closeModal() {
      document.getElementById('pokemonModal').style.display = 'none';
    }

    // Render pagination
    function renderPagination() {
      const pagination = document.getElementById('pagination');
      const totalPages = Math.ceil(filteredPokemon.length / POKEMON_PER_PAGE);
      
      if (totalPages <= 1) {
        pagination.innerHTML = '';
        return;
      }
      
      pagination.innerHTML = `
        <button class="pagination-button" onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>
          <i class="fas fa-chevron-left"></i> ${t('previous')}
        </button>
        <div class="pagination-info">
          ${t('page')} ${currentPage} / ${totalPages}
        </div>
        <button class="pagination-button" onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>
          ${t('next')} <i class="fas fa-chevron-right"></i>
        </button>
      `;
    }

    // Change page
    function changePage(page) {
      const totalPages = Math.ceil(filteredPokemon.length / POKEMON_PER_PAGE);
      if (page < 1 || page > totalPages) return;
      
      currentPage = page;
      renderPokemonGrid();
      renderPagination();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Show/hide loading
    function showLoading() {
      document.getElementById('loadingContainer').style.display = 'block';
      document.getElementById('pokemonGrid').innerHTML = '';
    }

    function hideLoading() {
      document.getElementById('loadingContainer').style.display = 'none';
    }

    // Event listeners
    document.getElementById('searchInput').addEventListener('input', (e) => {
      searchQuery = e.target.value.trim();
      applyFilter();
    });

    document.getElementById('searchButton').addEventListener('click', () => {
      const input = document.getElementById('searchInput');
      searchQuery = input.value.trim();
      applyFilter();
    });

    // Filter tabs
    document.querySelectorAll('.filter-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        
        currentFilter = tab.dataset.filter || tab.dataset.gen;
        applyFilter();
      });
    });

    // Settings
    const settingsButton = document.getElementById('settingsButton');
    const settingsPanel = document.getElementById('settingsPanel');
    const languageSelect = document.getElementById('languageSelect');

    settingsButton.addEventListener('click', () => {
      settingsPanel.classList.toggle('active');
    });

    languageSelect.value = currentLanguage;
    languageSelect.addEventListener('change', (e) => {
      currentLanguage = e.target.value;
      localStorage.setItem('pokedexLanguage', currentLanguage);
      updateLanguage();
    });

    // Close modal on outside click
    window.onclick = (event) => {
      const modal = document.getElementById('pokemonModal');
      if (event.target === modal) {
        closeModal();
      }
    };

    // Initialize app
    init();
  </script>
</body>
</html>